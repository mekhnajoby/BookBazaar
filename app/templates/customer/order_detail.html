{% extends 'base.html' %}
{% block title %}Order {{ order.order_number }} - BookBazaar{% endblock %}
{% block content %}
<div class="page-wrapper">
    <div class="container">
        <a href="{{ url_for('customer.orders') }}" class="btn btn-secondary btn-sm mb-3"><i
                class="fas fa-arrow-left"></i> Back to Orders</a>
        <div class="flex justify-between items-center mb-4">
            <h1>Order {{ order.order_number }}</h1>
            <span
                class="badge badge-{% if order.status == 'delivered' %}success{% elif order.status == 'cancelled' %}danger{% else %}info{% endif %}"
                style="font-size: 1rem; padding: 0.5rem 1rem;">{{ order.status|upper }}</span>
        </div>
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
            <div class="card">
                <h3 class="mb-3">Order Items</h3>
                {% for item in order.items %}
                <div class="flex gap-3 mb-3 pb-3" style="border-bottom: 1px solid var(--border-color);">
                    <div
                        style="width: 60px; height: 80px; background: var(--bg-secondary); border-radius: var(--radius); display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-book"></i>
                    </div>
                    <div style="flex: 1;">
                        <h4 style="margin-bottom: 0.25rem;">{{ item.book.title }}</h4>
                        <p class="text-muted" style="font-size: 0.875rem;">by {{ item.book.author }}</p>
                    </div>
                    <div class="text-right">
                        <p>${{ "%.2f"|format(item.price) }} x {{ item.quantity }}</p>
                        <p style="font-weight: 600; color: var(--accent);">${{ "%.2f"|format(item.get_subtotal()) }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div>
                <div class="card mb-3">
                    <h4 class="mb-3">Order Summary</h4>
                    <p><strong>Date:</strong> {{ order.order_date.strftime('%Y-%m-%d %H:%M') }}</p>
                    <p><strong>Payment:</strong> {{ order.payment_method|upper }}</p>
                    <hr style="border-color: var(--border-color); margin: 1rem 0;">
                    <p style="font-size: 1.5rem; font-weight: 700;">Total: ${{ "%.2f"|format(order.total_price) }}</p>
                </div>
                <div class="card">
                    <h4 class="mb-3">Shipping Address</h4>
                    <p style="white-space: pre-line;">{{ order.shipping_address }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}