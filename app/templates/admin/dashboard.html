{% extends 'base.html' %}
{% block title %}Admin Dashboard - BookBazaar{% endblock %}
{% block content %}
<div class="page-wrapper">
    <div class="container">
        <h1 class="mb-4">Admin Dashboard</h1>
        <div class="stats-grid mb-5">
            <div class="stat-card">
                <div class="stat-card-icon">ðŸ‘¥</div>
                <div class="stat-card-value">{{ total_users }}</div>
                <div class="stat-card-label">Total Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-icon">ðŸ“š</div>
                <div class="stat-card-value">{{ total_books }}</div>
                <div class="stat-card-label">Total Books</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-icon">ðŸ“¦</div>
                <div class="stat-card-value">{{ total_orders }}</div>
                <div class="stat-card-label">Total Orders</div>
            </div>
            <div class="stat-card">
                <div class="stat-card-icon">ðŸ’°</div>
                <div class="stat-card-value">${{ "%.2f"|format(total_revenue) }}</div>
                <div class="stat-card-label">Total Revenue</div>
            </div>
        </div>
        {% if pending_sellers > 0 %}
        <div class="alert alert-warning mb-4"><i class="fas fa-exclamation-triangle"></i> {{ pending_sellers }}
            seller(s) pending approval. <a href="{{ url_for('admin.pending_sellers') }}">Review now</a></div>
        {% endif %}
        <div class="flex gap-3 mb-4">
            <a href="{{ url_for('admin.users') }}" class="btn btn-primary"><i class="fas fa-users"></i> Manage Users</a>
            <a href="{{ url_for('admin.pending_sellers') }}" class="btn btn-secondary"><i class="fas fa-user-check"></i>
                Seller Approvals</a>
            <a href="{{ url_for('admin.orders') }}" class="btn btn-secondary"><i class="fas fa-box"></i> All Orders</a>
            <a href="{{ url_for('admin.categories') }}" class="btn btn-secondary"><i class="fas fa-tags"></i>
                Categories</a>
            <a href="{{ url_for('admin.books') }}" class="btn btn-secondary"><i class="fas fa-book"></i> All Books</a>
        </div>
        <div class="grid grid-2">
            <div class="card">
                <h3 class="mb-3">Recent Orders</h3>
                {% for order in recent_orders[:5] %}
                <div class="flex justify-between mb-2 pb-2" style="border-bottom: 1px solid var(--border-color);">
                    <span>{{ order.order_number }}</span>
                    <span class="badge badge-info">{{ order.status }}</span>
                    <span>${{ "%.2f"|format(order.total_price) }}</span>
                </div>
                {% endfor %}
            </div>
            <div class="card">
                <h3 class="mb-3">Recent Users</h3>
                {% for user in recent_users[:5] %}
                <div class="flex justify-between mb-2 pb-2" style="border-bottom: 1px solid var(--border-color);">
                    <span>{{ user.username }}</span>
                    <span
                        class="badge badge-{% if user.role == 'admin' %}danger{% elif user.role == 'seller' %}warning{% else %}info{% endif %}">{{
                        user.role }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}